<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>TEST - 420 STORE</title>
  <style>
    body {
      background: #0b0b0b;
      color: #f4f4f4;
      font-family: Arial, sans-serif;
      padding: 30px;
    }
    .resultado {
      background: #111;
      border: 2px solid #daa520;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
    }
    .productos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    .tarjeta {
      background: #111;
      border: 1px solid #daa520;
      padding: 15px;
      border-radius: 10px;
    }
    .tarjeta img {
      width: 100%;
      border-radius: 8px;
    }
    h1 { color: #daa520; }
    h3 { color: #4CAF50; }
    .error { color: #ff4444; }
    pre {
      background: #000;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>

<h1>üß™ TEST DE PRODUCTOS - 420 STORE</h1>

<div id="resultado" class="resultado">
  ‚è≥ Probando conexi√≥n con la API...
</div>

<div id="productos-test" class="productos-grid">
  ‚è≥ Esperando datos...
</div>

<script>
console.log('=== INICIO DEL TEST ===');
console.log('Fecha:', new Date().toLocaleString());

const resultadoDiv = document.getElementById('resultado');
const productosDiv = document.getElementById('productos-test');

// Test 1: Verificar conexi√≥n a la API
console.log('üì° Probando API...');

const apiUrl = 'php/obtenerProductos.php?accion=listar&limite=10';
console.log('URL completa:', window.location.origin + '/' + apiUrl);

fetch(apiUrl)
  .then(response => {
    console.log('‚úÖ Respuesta recibida');
    console.log('Status:', response.status);
    console.log('Status Text:', response.statusText);
    console.log('Headers:', response.headers);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    return response.json();
  })
  .then(data => {
    console.log('‚úÖ Datos JSON recibidos:', data);
    
    if (data.success && data.data && data.data.productos) {
      const numProductos = data.data.productos.length;
      console.log(`‚úÖ ${numProductos} productos encontrados`);
      
      resultadoDiv.innerHTML = `
        <h3>‚úÖ API FUNCIONANDO CORRECTAMENTE</h3>
        <p><strong>Success:</strong> ${data.success}</p>
        <p><strong>Message:</strong> ${data.message}</p>
        <p><strong>Productos encontrados:</strong> ${numProductos}</p>
        <details>
          <summary style="cursor:pointer;color:#daa520;">Ver JSON completo</summary>
          <pre>${JSON.stringify(data, null, 2)}</pre>
        </details>
      `;
      
      // Renderizar productos
      productosDiv.innerHTML = '';
      
      data.data.productos.forEach((prod, index) => {
        console.log(`Renderizando producto ${index + 1}:`, prod.nombre);
        
        const div = document.createElement('div');
        div.className = 'tarjeta';
        div.innerHTML = `
          <img src="${prod.imagen_url}" 
               alt="${prod.nombre}" 
               onerror="this.src='https://via.placeholder.com/300?text=Sin+Imagen'">
          <h3 style="color:#daa520;margin:10px 0;font-size:1.1rem;">${prod.nombre}</h3>
          <p style="color:#999;font-size:0.85rem;margin:5px 0;">${prod.descripcion}</p>
          <p style="color:#daa520;font-weight:bold;font-size:1.2rem;margin:10px 0;">
            $${Number(prod.precio).toLocaleString()} COP
          </p>
          <p style="color:#aaa;font-size:0.9rem;">Stock: ${prod.stock} | Categor√≠a: ${prod.categoria}</p>
        `;
        productosDiv.appendChild(div);
      });
      
      console.log('‚úÖ Productos renderizados correctamente');
      
    } else {
      throw new Error('Formato de respuesta inv√°lido');
    }
  })
  .catch(error => {
    console.error('‚ùå ERROR:', error);
    console.error('Stack:', error.stack);
    
    resultadoDiv.innerHTML = `
      <h3 class="error">‚ùå ERROR AL CARGAR PRODUCTOS</h3>
      <p><strong>Error:</strong> ${error.message}</p>
      <p><strong>URL intentada:</strong> ${apiUrl}</p>
      <p><strong>Sugerencia:</strong> Verifica que XAMPP est√© corriendo y que la ruta sea correcta.</p>
    `;
    
    productosDiv.innerHTML = `
      <p class="error" style="text-align:center;padding:20px;">
        No se pudieron cargar los productos. Revisa la consola para m√°s detalles.
      </p>
    `;
  });

// Test adicional: Verificar que los scripts cargan
console.log('Verificando scripts...');
console.log('store-core.js cargado:', typeof window.agregarAlCarrito !== 'undefined');
console.log('productos-dinamicos.js cargado:', typeof window.cargarProductosDestacados !== 'undefined');
</script>

</body>
</html>
```

---

### **Paso 2: Abre test.html en el navegador**

Navega a:
```
http://localhost/420store/test.html